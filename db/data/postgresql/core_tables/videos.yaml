schema_definitions:
  - column: id
    type: serial
    description: primary key

  - column: title
    type: varchar(255)
    description: video title

  - column: description
    type: text
    nullable: true
    description: video description

  - column: duration_seconds
    type: integer
    description: total duration of video in seconds

  - column: category_id
    type: integer
    description: foreign key to categories table

  - column: publisher_id
    type: integer
    description: foreign key to user_profiles (video owner/creator)

  - column: thumbnail_url
    type: text
    nullable: true
    description: URL of video thumbnail image

  - column: video_url
    type: text
    description: URL of video file

  - column: tags
    type: text[]
    nullable: true
    description: array of tags for the video

  - column: language
    type: char(2)
    default: 'en'
    description: video language code (en, tr, de, etc.)

  - column: age_rating
    type: varchar(10)
    default: 'G'
    description: age rating (G, PG, PG-13, R, 18+)

  - column: status
    type: varchar(20)
    default: 'active'
    description: video status (active, deleted, processing, blocked)

  - column: is_monetized
    type: boolean
    default: false
    description: whether video has monetization enabled

  - column: uploaded_at
    type: timestamp
    description: upload timestamp

  - column: updated_at
    type: timestamp
    description: last update timestamp

videos_examples:
  - id: 1
    title: "How Kubernetes Works"
    description: "A comprehensive guide to Kubernetes architecture"
    duration_seconds: 1200
    category_id: 3
    publisher_id: 101
    tags: ["kubernetes", "docker", "devops", "cloud"]
    language: "en"
    age_rating: "G"
    status: "active"
    is_monetized: true
    uploaded_at: "2025-10-10T14:00:00Z"
    updated_at: "2025-10-10T14:00:00Z"

  - id: 2
    title: "React Hooks Tutorial"
    description: "Learn React Hooks from scratch"
    duration_seconds: 900
    category_id: 2
    publisher_id: 102
    tags: ["react", "javascript", "frontend", "hooks"]
    language: "en"
    age_rating: "G"
    status: "active"
    is_monetized: false
    uploaded_at: "2025-11-15T10:30:00Z"
    updated_at: "2025-11-15T10:30:00Z"

indexes:
  - name: idx_videos_category
    columns: [category_id]

  - name: idx_videos_publisher
    columns: [publisher_id]

  - name: idx_videos_uploaded
    columns: [uploaded_at]
    order: DESC

  - name: idx_videos_tags
    columns: [tags]
    type: GIN

  - name: idx_videos_status
    columns: [status]
    condition: "WHERE status = 'active'"

constraints:
  - name: fk_videos_category
    type: foreign_key
    columns: [category_id]
    references: categories(id)

  - name: fk_videos_publisher
    type: foreign_key
    columns: [publisher_id]
    references: user_profiles(id)
